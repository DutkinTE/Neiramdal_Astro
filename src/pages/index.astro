---
import MainHeader from "../components/main/components/main-header.astro";
import MainContent from "../components/main/parts/main-content.astro";
import WhoContent from "../components/main/parts/who-content.astro";
import WhoEnd from "../components/main/parts/who-end.astro";
import SkillsContent from "../components/main/parts/skills-content.astro";
import Footer from "../components/main/parts/footer.astro";
import MainIsland from "../components/main/components/main-island.astro";
import MainOrder from "../components/main/parts/main-order.astro";
import MainOurWorks from "../components/main/parts/main-our-works.astro";
import "../styles/global.css";
---

<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="assets/images/white_logo.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <meta
      name="keywords"
      content="разработка, разработка под ключ, сайт на заказ, купить сайт, разработка ПО, разработка сайта, заказать сайт, сайт, приложение, купить, заказать, нейрамдал, 
      neiramdal, Neiramdal, сайт под ключ, разработка сайтов, создание сайтов, веб-разработка, заказ сайта, услуги веб-разработки, веб-дизайн, front-end разработка, 
      back-end разработка, full-stack разработка, адаптивные сайты, корпоративные сайты, лендинги, интернет-магазины, веб-приложения, заказ веб-приложения, кастомная разработка, 
      разработка мобильных приложений, создание мобильных приложений, мобильная разработка, заказ мобильного приложения, Android разработка, iOS разработка, кроссплатформенная разработка, 
      PWA, нативные приложения, Flutter, React Native, HTML, CSS, JavaScript, Vue.js, AstroJS, Node.js, API, адаптивный дизайн, UX/UI, веб-анимация, SEO-оптимизация, CMS, WordPress, 
      Nuxt.js, SSR, SPA, веб-хостинг, DevOps, безопасность веб-приложений, цифровые решения, автоматизация бизнеса, веб-разработка на заказ, веб-студия, ИТ-услуги, ИТ-консалтинг, 
      аутсорсинг разработки, поддержка сайтов, доработка сайтов, редизайн сайтов"
    />
    <meta
      name="description"
      content="Профессиональная разработка сайтов и веб-приложений в Neiramdal. Создаём быстрые, адаптивные и удобные решения. Закажите сайт для бизнеса, портфолио или интернет-магазина."
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Play:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <title>Neiramdal</title>
  </head>
  <body onload="window.scrollTo(0, 0);">
    <div class="overlay">
      <div class="overlay-strip"></div>
      <div class="overlay-strip"></div>
      <div class="overlay-strip"></div>
      <div class="overlay-strip"></div>
      <div class="overlay-strip"></div>
    </div>
    <MainIsland />
    <main id="main">
      <MainHeader />
      <div class="container">
        <spline-viewer
          id="background-video"
          url="https://prod.spline.design/94lNqMqdETVwhA1N/scene.splinecode"
        ></spline-viewer>
        <div class="black-box"></div>
        <MainContent />
      </div>
    </main>
    <canvas id="who-canvas"></canvas>
    <div id="who">
      <div class="container" id="who-content">
        <WhoContent />
      </div>
      <div id="who-end">
        <WhoEnd />
      </div>
      <div id="skills">
        <SkillsContent />
      </div>
      <div id="our-works">
        <MainOurWorks />
      </div>
      <div id="order">
        <div id="three-container">
          <spline-viewer
            url="https://prod.spline.design/C0AVB1at0BFjnOsQ/scene.splinecode"
          ></spline-viewer>
          <div class="black-box2"></div>
        </div>
        <MainOrder />
      </div>
      <Footer />
    </div>
    <script>
      import "../scripts/main.js";
      import "../scripts/cursor.js";
      import "../scripts/canvas.js";
      import "../scripts/scroll.js";
      import "../scripts/nav.js";
      import "../scripts/blackout.js";
      import "../scripts/overlay.js";
    </script>
    <script
      src="https://unpkg.com/@splinetool/viewer@1.9.68/build/spline-viewer.js"
    ></script>
    <script type="module">
      window.addEventListener("load", () => {
        setTimeout(() => {
          document.querySelector(".overlay").classList.add("hidden");
        }, 200);
      });
      window.addEventListener("pageshow", function (event) {
        setTimeout(() => {
          document.querySelector(".overlay").classList.add("hidden");
        }, 200);
      });
    </script>
  </body>
  <script type="text/javascript">
    window.onbeforeunload = function () {
      window.scrollTo(0, 0);
    };
  </script>
  <!-- <script>
    import Lenis from "lenis";

    import "lenis/dist/lenis.css";
    import { gsap } from "gsap";
    import { ScrollTrigger } from "gsap/ScrollTrigger";
    import SplitType from "split-type";
    gsap.registerPlugin(ScrollTrigger);

    const splitTypes = document.querySelectorAll(".reveal-type");

    splitTypes.forEach((char, i) => {
      const bg = "transparent";
      const fg = "#f5f5f5";

      const text = new SplitType(char as HTMLElement, { types: "chars" });

      gsap.fromTo(
        text.chars,
        { color: bg },
        {
          color: fg,
          duration: 0.1,
          stagger: 0.02,
          scrollTrigger: {
            trigger: char,
            start: "top 90%",
            end: "top 70%",
            scrub: true,
            markers: false,
            onLeaveBack: () =>
              gsap.to(text.chars, { color: bg, duration: 0.1 }),
          },
        }
      );
    });

    const lenis = new Lenis();

    function raf(time) {
      lenis.raf(time);
      requestAnimationFrame(raf);
    }

    requestAnimationFrame(raf);
  </script> -->
</html>

<style>
  .black-box {
    position: absolute;
    bottom: 0%;
    right: -200px;
    background-color: #040404;
    width: 158px;
    height: 500px;
    z-index: 9999999;
  }

  .black-box2 {
    position: absolute;
    bottom: 0%;
    right: 0;
    background-color: #040404;
    width: 158px;
    height: 500px;
    z-index: 9999999;
  }

  .overlay {
    display: flex;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 9999;
    pointer-events: none;
  }

  .overlay-strip {
    flex: 1;
    background-color: #0a0a0a;
    height: 100%;
    transform: translateY(
      0
    );
    transition: transform 1.2s ease-in-out;
  }

  .overlay.hidden .overlay-strip:nth-child(1) {
    transition-delay: 0s;
    transform: translateY(-100%);
  }
  .overlay.hidden .overlay-strip:nth-child(2) {
    transition-delay: 0.2s;
    transform: translateY(-100%);
  }
  .overlay.hidden .overlay-strip:nth-child(3) {
    transition-delay: 0.4s;
    transform: translateY(-100%);
  }
  .overlay.hidden .overlay-strip:nth-child(4) {
    transition-delay: 0.6s;
    transform: translateY(-100%);
  }
  .overlay.hidden .overlay-strip:nth-child(5) {
    transition-delay: 0.8s;
    transform: translateY(-100%);
  }

  .overlay .overlay-strip .overlay-strip:nth-child(1) {
    transition-delay: 0s;
    transform: translateY(0);
  }
  .overlay .overlay-strip:nth-child(2) {
    transition-delay: 0.2s;
    transform: translateY(0);
  }
  .overlay .overlay-strip:nth-child(3) {
    transition-delay: 0.4s;
    transform: translateY(0);
  }
  .overlay .overlay-strip:nth-child(4) {
    transition-delay: 0.6s;
    transform: translateY(0);
  }
  .overlay .overlay-strip:nth-child(5) {
    transition-delay: 0.8s;
    transform: translateY(0);
  }

  #three-container {
    position: absolute;
    top: 0;
    overflow: hidden;
    width: calc(100%-);
    height: 700px;
    z-index: -1;
  }
  #order {
    height: 1080px;
    width: 100%;
    padding-left: 70px;
    padding-right: 70px;
    background-color: #040404;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    position: relative;
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  #our-works {
    position: sticky;
    height: 965px;
    background-color: #0a0a0a;
    width: 100%;
    top: 0;
    padding-top: 75px;
    padding-left: 70px;
    padding-right: 70px;
    z-index: 4;
  }
  #skills {
    max-width: 1440px;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
    justify-items: center;
    width: 100%;
    padding-right: 70px;
    padding-left: 70px;
    padding-top: 70px;
    padding-bottom: 250px;
    position: sticky;
    z-index: 3;
    background-color: #040404;
    color: #f5f5f5;
    transition: color 0.5s ease;
  }

  #who-content {
    margin-bottom: 90px;
    height: 300px;
  }

  #who-end {
    width: 100%;
    position: sticky;
    z-index: 2;
    top: 0;
    padding-bottom: 250px;
  }

  #who-canvas {
    height: 140px;
    width: 100%;
    max-width: 1580px;
    pointer-events: none;
    position: relative;
    display: block;
    z-index: 999;
    opacity: 0;
  }

  #background-video {
    position: absolute;
    top: -100px;
    right: -200px;
    object-fit: cover;
    z-index: -1;
    transition: all 0.5s;
    width: 900px;
    display: flex;
    flex-direction: column-reverse;
  }

  #who {
    max-width: 1440px;
    width: calc(100% - 140px);
    font-weight: 100;
    color: #f5f5f5;
    padding-top: 70px;
    background-color: rgba(16, 16, 16, 0.6);
    backdrop-filter: blur(45px);
    position: relative;
    z-index: 2;
    justify-items: center;
    padding-right: 70px;
    padding-left: 70px;
    border-top-left-radius: 20px;
    border-top-right-radius: 20px;
  }

  #main {
    width: calc(100% - 140px);
    height: 750px;
    min-height: 630px;
    top: 0;
    position: sticky;
    justify-items: center;
    padding-left: 70px;
    padding-right: 70px;
    padding-top: 50px;
    z-index: 1;
    overflow: hidden;
  }
</style>
